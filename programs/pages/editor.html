
<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>GitHub Code Viewer</title>

<style>
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif;
  background:#f6f8fa;
  font-size:14px;
  color:#24292f;
}

.global-header{
  background:#24292f;
  color:#fff;
  height:56px;
  display:flex;
  align-items:center;
  padding:0 16px;
  font-weight:600;
}

.breadcrumb{
  background:#fff;
  padding:12px 24px;
  border-bottom:1px solid #d0d7de;
}

.code-wrapper{
  margin:24px;
  border:1px solid #d0d7de;
  border-radius:6px;
  background:#fff;
  overflow:hidden;
}

.code-header{
  background:#f6f8fa;
  padding:8px 16px;
  border-bottom:1px solid #d0d7de;
  display:flex;
  justify-content:space-between;
  font-size:12px;
  color:#57606a;
}

.code-area{
  display:flex;
  font-family:ui-monospace,SFMono-Regular,Consolas,"Liberation Mono",Menlo,monospace;
  font-size:13px;
  height:500px;
}

.line-numbers{
  background:#f6f8fa;
  padding:10px 8px;
  text-align:right;
  user-select:none;
  color:#57606a;
  overflow:hidden;
}

pre{
  margin:0;
  padding:10px;
  overflow:auto;
  white-space:pre;
  flex:1;
}
</style>
</head>
<body>

<div class="global-header">
  GitHub
</div>

<div class="breadcrumb" id="filePath">
  Loading...
</div>

<div class="code-wrapper">

  <div class="code-header">
    <div id="lineCount">0 lines</div>
    <div>Raw ・ Blame ・ History</div>
  </div>

  <div class="code-area">
    <div class="line-numbers" id="lineNumbers"></div>
    <pre id="codeDisplay"></pre>
  </div>

</div>

<script>
const lineNumbers = document.getElementById("lineNumbers");
const lineCount = document.getElementById("lineCount");
const codeDisplay = document.getElementById("codeDisplay");
const filePathDisplay = document.getElementById("filePath");

/* URLパラメータからファイル取得 */
const params = new URLSearchParams(window.location.search);
const fileName = params.get("file") || "sample.html";

filePathDisplay.textContent = fileName;

/* ファイル読み込み */
fetch(fileName)
  .then(res => res.text())
  .then(text => {
    codeDisplay.textContent = text;
    generateLines(text);
  })
  .catch(() => {
    codeDisplay.textContent = "File not found.";
  });

function generateLines(text){
  const lines = text.split("\n");
  lineNumbers.innerHTML = lines.map((_,i)=> i+1).join("<br>");
  lineCount.textContent = lines.length + " lines";
}

/* スクロール同期 */
codeDisplay.addEventListener("scroll",()=>{
  lineNumbers.scrollTop = codeDisplay.scrollTop;
});
</script>

</body>
</html>
